(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{9735:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pos",function(){return s(1100)}])},4823:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var l=s(5893),a=s(1664),n=s.n(a),i=s(1163),r=s(1761);let c=[{href:"/products",label:"Products"},{href:"/categories",label:"Categories"},{href:"/pos",label:"POS"},{href:"/history/inbound",label:"Inbound History"},{href:"/history/outbound",label:"Outbound History"}];function o(){let{logout:e}=(0,r.aC)(),t=(0,i.useRouter)(),s=e=>t.pathname===e||t.pathname.startsWith("".concat(e,"/"));return(0,l.jsx)("aside",{className:"w-full bg-slate-950 text-slate-100 lg:sticky lg:top-0 lg:h-screen lg:w-64",children:(0,l.jsxs)("div",{className:"flex flex-col border-b border-slate-800 bg-gradient-to-b from-slate-950 to-slate-900 lg:h-full",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 border-b border-slate-800 px-4 py-4",children:[(0,l.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-indigo-500 text-base font-semibold text-white shadow-lg shadow-indigo-500/30",children:"POS"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(n(),{href:"/products",className:"text-lg font-semibold text-white",children:"Cuslabs POS"}),(0,l.jsx)("p",{className:"text-xs text-slate-400",children:"Cuslabs POS"})]})]}),(0,l.jsx)("nav",{className:"flex-1 space-y-1 px-3 py-4 text-sm",children:c.map(e=>(0,l.jsx)(n(),{href:e.href,className:["flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition",s(e.href)?"bg-indigo-500/20 text-white ring-1 ring-indigo-400/70":"text-slate-100 hover:bg-slate-800 hover:text-white"].join(" "),children:e.label},e.href))}),(0,l.jsx)("div",{className:"border-t border-slate-800 px-3 py-4",children:(0,l.jsx)("button",{className:"w-full rounded-lg bg-slate-800 px-3 py-2 text-center text-slate-100 transition hover:bg-slate-700",onClick:e,type:"button",children:"Logout"})})]})})}function d(e){let{children:t}=e;return(0,l.jsx)("div",{className:"min-h-screen bg-slate-100",children:(0,l.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[(0,l.jsx)(o,{}),(0,l.jsx)("main",{className:"flex-1 px-4 py-6 lg:px-10",children:(0,l.jsx)("div",{className:"mx-auto w-full max-w-6xl",children:t})})]})})}},1100:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var l=s(5893),a=s(7294),n=s(4823),i=s(1761),r=s(7829);function c(){var e,t;let{authReady:s,token:c}=(0,i.QL)(),{products:o,sell:d}=(0,r.m)(),[u,x]=(0,a.useState)(null!==(t=null===(e=o[0])||void 0===e?void 0:e.id)&&void 0!==t?t:""),[h,m]=(0,a.useState)("1"),[f,b]=(0,a.useState)(null),p=(0,a.useMemo)(()=>{var e;return null!==(e=o.find(e=>e.id===u))&&void 0!==e?e:null},[o,u]);return s&&c?(0,l.jsxs)(n.Z,{children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("h1",{className:"page-title",children:"Point of Sale"}),(0,l.jsx)("p",{className:"page-subtitle",children:"Quick sell flow updates stock."})]}),(0,l.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),b(null),!u){b("Select a product.");return}let t=d(u,Number(h));if(t.success)b("Sale recorded");else{var s;b(null!==(s=t.message)&&void 0!==s?s:"Sale failed")}},className:"card max-w-xl space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Product"}),(0,l.jsxs)("select",{value:u,onChange:e=>x(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"Select a product"}),o.map(e=>(0,l.jsxs)("option",{value:e.id,children:[e.name," (Stock: ",e.stock,")"]},e.id))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Quantity"}),(0,l.jsx)("input",{type:"number",min:"1",step:"1",value:h,onChange:e=>m(e.target.value)})]}),p&&(0,l.jsxs)("p",{className:"text-sm text-slate-600",children:["Price: Rp ",p.price.toFixed(2)," â€” Stock: ",p.stock]}),f&&(0,l.jsx)("p",{className:"text-sm text-indigo-700",children:f}),(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)("button",{type:"submit",className:"rounded-lg bg-green-600 px-4 py-2 text-white shadow-sm hover:bg-green-700",children:"Sell"})})]})]}):null}}},function(e){e.O(0,[664,888,774,179],function(){return e(e.s=9735)}),_N_E=e.O()}]);